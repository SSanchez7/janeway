{% load foundation %}

<div class="reveal small" id="request-{{ assignment_request.pk }}" data-reveal data-animation-in="slide-in-up"
     data-animation-out="slide-out-down">
    <div class="card">
        <div class="card-divider">
            <h4>Editor Assignment Request for: {{ assignment_request.article.safe_title }}</h4>
        </div>
        <div class="card-section">

            <p><strong>Handling Editor(s):</strong></p>

            <ul>
                {% if assignment_request.article.editors %}
                    {% for editor in assignment_request.article.senior_editors %}
                        <li>{{ editor.editor.full_name }} <a href="mailto:{{ editor.editor.email }}?subject={{ assignment_request.article.journal.name }} Editor Assignment"><i
                                class="fa fa-envelope"></i></a></li>
                    {% empty %}
                        <li>This article has no editors.</li>
                    {% endfor %}
                {% endif %}
            </ul>

            <p><strong>Due Date</strong></p>
            <p>{{ assignment_request.date_due|date:"Y-m-d" }}</p>

            <p><strong>Abstract</strong></p>
            {{ assignment_request.article.abstract|safe }}
            <br />
            <p><strong>Keywords</strong></p>
            {{ article.keywords.all }}
            <p>
                {% for keyword in assignment_request.article.keywords.all %}
                    {{ keyword.word }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                    Article has no keywords.
                {% endfor %}
            </p>
            <p><strong>Section</strong></p>
            <p>{{ assignment_request.article.section.name }}</p>

            <p><strong>Language</strong></p>
            <p>{{ assignment_request.article.get_language_display }}</p>
            
            {% if journal_settings.general.enable_study_topics %}
            <p><strong>Study Topics</strong></p>
            {% include "admin/elements/review/assigned_topics_table.html" with topics_by_type=assignment_request.article.topics_by_type %}
            {% endif %}
        </div>
    </div>
    <button class="close-button" data-close aria-label="Close reveal" type="button">
        <span aria-hidden="true">&times;</span>
    </button>
</div>